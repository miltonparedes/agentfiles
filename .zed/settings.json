// Project-specific Zed settings for agents
// Uses Oxc extension (oxfmt + oxlint) for formatting and linting
// Docs: https://github.com/oxc-project/oxc-zed
{
  "lsp": {
    "oxlint": {
      "initialization_options": {
        "settings": {
          "configPath": null,
          "run": "onType",
          "disableNestedConfig": false,
          "fixKind": "safe_fix",
          "typeAware": true,
          "unusedDisableDirectives": "deny"
        }
      }
    },
    "oxfmt": {
      "initialization_options": {
        "settings": {
          "configPath": null,
          "run": "onSave"
        }
      }
    }
  },
  "languages": {
    "TypeScript": {
      "format_on_save": "on",
      "prettier": { "allowed": false },
      // Disable ESLint and biome, keep only typescript-language-server (intellisense) + oxc
      "language_servers": [
        "typescript-language-server",
        "oxlint",
        "oxfmt",
        "!eslint",
        "!biome",
        "!prettier"
      ],
      "formatter": [
        { "language_server": { "name": "oxfmt" } },
        { "code_action": "source.fixAll.oxc" }
      ]
    },
    "TSX": {
      "format_on_save": "on",
      "prettier": { "allowed": false },
      "language_servers": [
        "typescript-language-server",
        "oxlint",
        "oxfmt",
        "!eslint",
        "!biome",
        "!prettier"
      ],
      "formatter": [
        { "language_server": { "name": "oxfmt" } },
        { "code_action": "source.fixAll.oxc" }
      ]
    },
    "JavaScript": {
      "format_on_save": "on",
      "prettier": { "allowed": false },
      "language_servers": [
        "typescript-language-server",
        "oxlint",
        "oxfmt",
        "!eslint",
        "!biome",
        "!prettier"
      ],
      "formatter": [
        { "language_server": { "name": "oxfmt" } },
        { "code_action": "source.fixAll.oxc" }
      ]
    },
    "JSON": {
      "format_on_save": "on",
      "prettier": { "allowed": false },
      "formatter": [{ "language_server": { "name": "oxfmt" } }]
    },
    "JSONC": {
      "format_on_save": "on",
      "prettier": { "allowed": false },
      "formatter": [{ "language_server": { "name": "oxfmt" } }]
    },
    "Markdown": {
      "format_on_save": "off",
      "prettier": { "allowed": false }
    }
  }
}
